<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.whut.bear.gather.dao.UserDao">
    <!-- User getUserByUsernameAndPassword(@Param("username") String username, @Param("password") String password); -->
    <select id="getUserByUsernameAndPassword" resultType="User">
        select *
        from t_user
        where username = #{username}
          and password = #{password}
    </select>

    <!-- int updateUserPasswordById(@Param("newPassword") String newPassword, @Param("id") Integer id); -->
    <update id="updateUserPasswordById">
        update t_user
        set password = #{newPassword}
        where id = #{id}
    </update>

    <!-- int updateLastRecordCreatedDate(@Param("newDate") Date date, @Param("userId") Integer userId); -->
    <update id="updateLastRecordCreatedDate">
        update t_user
        set last_record_create_date = #{newDate}
        where id = #{userId}
    </update>

    <!-- List<User> getClassUserListNotLogin(@Param("classNumber") Integer classNumber, @Param("date") Date date); -->
    <select id="getClassUserListNotLogin" resultType="User">
        select id, username, real_name, class_number, class_name, grade
        from t_user
        where class_number = #{classNumber}
          and last_record_create_date != #{date,jdbcType=DATE}
    </select>

    <!-- List<User> getGradeUserListNotLogin(@Param("grade") Integer grade, @Param("date") Date date); -->
    <select id="getGradeUserListNotLogin" resultType="User">
        select id, username, real_name, class_number, class_name, grade
        from t_user
        where grade = #{grade}
          and last_record_create_date != #{date,jdbcType=DATE}
        order by class_number
    </select>
</mapper>